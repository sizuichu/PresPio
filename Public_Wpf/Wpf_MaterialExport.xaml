<Window x:Class="PresPio.Public_Wpf.Wpf_MaterialExport"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:hc="https://handyorg.github.io/handycontrol"     
             xmlns:local="clr-namespace:PresPio.Public_Wpf"
             mc:Ignorable="d" 
             Title="素材导出"
             Height="700" Width="1200"
             WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <hc:ThemeResources />
                <hc:Theme />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 顶部工具栏 -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧操作按钮 -->
            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <Button x:Name="btnSelectAll" Content="全选" Width="80" Height="30" Margin="0,0,10,0"/>
                <Button x:Name="btnUnselectAll" Content="取消全选" Width="80" Height="30" Margin="0,0,10,0"/>
                <ComboBox x:Name="cmbExportType" Width="120" Height="30" Margin="0,0,10,0">
                    <ComboBoxItem Content="所有素材"/>
                    <ComboBoxItem Content="仅图片"/>
                    <ComboBoxItem Content="仅视频"/>
                    <ComboBoxItem Content="仅音频"/>
                </ComboBox>
            </StackPanel>

            <!-- 中间搜索框 -->
            <Grid Grid.Column="1" Margin="10,0">
                <TextBox x:Name="txtSearch" Height="30" 
                         hc:InfoElement.Placeholder="搜索素材..."
                         hc:InfoElement.ShowClearButton="True"/>
            </Grid>

            <!-- 右侧排序选项 -->
            <StackPanel Grid.Column="2" Orientation="Horizontal">
                <TextBlock Text="排序:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <ComboBox x:Name="cmbSort" Width="120" Height="30">
                    <ComboBoxItem Content="名称"/>
                    <ComboBoxItem Content="类型"/>
                    <ComboBoxItem Content="大小"/>
                    <ComboBoxItem Content="创建时间"/>
                </ComboBox>
            </StackPanel>
        </Grid>

        <!-- 主内容区 -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>

            <!-- 素材列表 -->
            <ListView x:Name="lvMaterials" Grid.Column="0" Margin="0,0,10,0">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox Grid.Column="0" IsChecked="{Binding IsSelected}" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <Image Grid.Column="1" Source="{Binding ThumbnailPath}" Width="80" Height="80" Stretch="Uniform" Margin="5"/>
                            <StackPanel Grid.Column="2" Margin="10,0,0,0">
                                <TextBox Text="{Binding Name}" FontWeight="Bold" BorderThickness="0" 
                                        Background="Transparent" Margin="0,0,0,5"/>
                                <TextBlock>
                                    <Run Text="类型: "/>
                                    <Run Text="{Binding Type}"/>
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="大小: "/>
                                    <Run Text="{Binding Size}"/>
                                </TextBlock>
                                <TextBlock>
                                    <Run Text="创建时间: "/>
                                    <Run Text="{Binding CreateTime, StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}"/>
                                </TextBlock>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- 预览面板 -->
            <Grid Grid.Column="1" Background="#F5F5F5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="预览" FontSize="16" FontWeight="Bold" Margin="10"/>

                <Border Grid.Row="1" Margin="10" BorderBrush="#DDDDDD" BorderThickness="1" Background="White">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="200"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <!-- 预览图 -->
                        <Image x:Name="imgPreview" Grid.Row="0" Stretch="Uniform" Margin="10"/>

                        <!-- 详细信息 -->
                        <StackPanel Grid.Row="1" Margin="10">
                            <TextBlock Text="详细信息" FontWeight="Bold" Margin="0,0,0,10"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="名称：" Margin="0,0,10,5"/>
                                <TextBlock Grid.Row="0" Grid.Column="1" x:Name="txtPreviewName" TextWrapping="Wrap"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="类型：" Margin="0,0,10,5"/>
                                <TextBlock Grid.Row="1" Grid.Column="1" x:Name="txtPreviewType"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="大小：" Margin="0,0,10,5"/>
                                <TextBlock Grid.Row="2" Grid.Column="1" x:Name="txtPreviewSize"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="位置：" Margin="0,0,10,5"/>
                                <TextBlock Grid.Row="3" Grid.Column="1" x:Name="txtPreviewPath" TextWrapping="Wrap"/>

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="创建时间：" Margin="0,0,10,5"/>
                                <TextBlock Grid.Row="4" Grid.Column="1" x:Name="txtPreviewCreateTime"/>

                                <TextBlock Grid.Row="5" Grid.Column="0" Text="幻灯片：" Margin="0,0,10,5"/>
                                <TextBlock Grid.Row="5" Grid.Column="1" x:Name="txtPreviewSlide"/>
                            </Grid>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Grid>

        <!-- 底部操作区 -->
        <Grid Grid.Row="2" Margin="0,10,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <TextBlock Text="导出位置：" VerticalAlignment="Center"/>
                <TextBox x:Name="txtExportPath" Width="300" Height="30" Margin="5,0"/>
                <Button x:Name="btnBrowse" Content="浏览" Width="80" Height="30"/>
                <Button x:Name="btnBatchRename" Content="批量重命名" Width="100" Height="30" Margin="10,0"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button x:Name="btnExport" Content="导出" Width="100" Height="30" Margin="0,0,10,0"/>
                <Button x:Name="btnCancel" Content="取消" Width="100" Height="30"/>
            </StackPanel>
        </Grid>

        <!-- 进度条区域 -->
        <Grid x:Name="progressGrid" Grid.Row="3" Margin="0,10,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <ProgressBar x:Name="mainProgressBar" Height="20" Margin="0,0,0,5"/>
            <TextBlock x:Name="mainProgressText" Grid.Row="1" HorizontalAlignment="Center"/>
        </Grid>
    </Grid>
</Window>
